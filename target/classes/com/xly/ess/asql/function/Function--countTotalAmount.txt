DELIMITER $$

USE `xly`$$

DROP FUNCTION IF EXISTS `countTotalAmount`$$

CREATE DEFINER=`root`@`%` FUNCTION `countTotalAmount`(V_billNo INT) RETURNS DOUBLE
BEGIN
    DECLARE TOTAL_AMOUNT DOUBLE DEFAULT 0;
	SELECT SUM(subTotal)+freight INTO TOTAL_AMOUNT FROM v_billrecord WHERE billNo=V_billNo;
	RETURN TOTAL_AMOUNT;
    END$$

DELIMITER ;